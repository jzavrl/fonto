{"version":3,"sources":["application.js","toolbar/toolbar.controller.js","toolbar/toolbar.directive.js","fonts/fonts.controller.js","fonts/fonts.directive.js","fonts/fonts.service.js","sidenav/sidenav.directive.js"],"names":[],"mappings":"AACA,GAAA,SAAA,QAAA,WACA,KAAA,QAAA,mBACA,KAAA,QAAA,gBACA,KAAA,QAAA,oBACA,GAAA,QAAA,oBAEA,IAAA,QAAA,OAAA,YAAA,eACA,QAAA,qBAAA,SAAA,GACA,EAAA,MAAA,WACA,eAAA,QACA,UAAA,SAEA,cAAA,UCbA,SAAA,OAAA,YACA,WAAA,eAAA,aAAA,cAAA,SAAA,EAAA,GACA,GAAA,GAAA,IAEA,GAAA,cAAA,WACA,EAAA,WAAA,UAEA,EAAA,SAAA,SAAA,EAAA,GACA,EAAA,IAEA,EAAA,WAAA,SAAA,GACA,EAAA,YAAA,IAEA,EAAA,YAAA,EAAA,iBCbA,QAAA,OAAA,YACA,UAAA,eAAA,WACA,OACA,SAAA,IACA,YAAA,iCCJA,QAAA,OAAA,YACA,WAAA,mBAAA,cAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,SACA,EAAA,SAAA,EACA,EAAA,KAAA,EAAA,cACA,QAAA,IAAA,EAAA,MAEA,EAAA,OACA,IACA,OAAA,UAEA,WACA,QAAA,IAIA,EAAA,aAAA,SAAA,GACA,EAAA,KAAA,SAAA,GACA,EAAA,SAAA,EACA,EAAA,MAAA,GACA,WACA,EAAA,SAAA,GACA,WACA,EAAA,SAAA,SCzBA,QAAA,OAAA,YACA,UAAA,aAAA,WACA,OACA,SAAA,IACA,YAAA,6BCJA,QAAA,OAAA,YACA,QAAA,eAAA,OAAA,QAAA,WAAA,KAAA,SAAA,EAAA,EAAA,EAAA,GACA,GAAA,IACA,KAAA,SACA,WAAA,EAGA,QACA,YAAA,SAAA,EAAA,GACA,GAAA,UAAA,EAUA,OAAA,CATA,IAAA,GAAA,6FAEA,GAAA,IAAA,GACA,KAEA,EAAA,IAAA,GAAA,QAAA,SAAA,GACA,EAAA,MAOA,iBAAA,WACA,GAAA,GAAA,QAAA,QACA,EAAA,QAAA,gBAEA,EAAA,GAAA,IACA,QAAA,QACA,WAAA,QAGA,OAAA,IAAA,IACA,SAAA,EAAA,WAAA,qBACA,UAAA,KAIA,UAAA,SAAA,EAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,mBACA,EAAA,EAAA,OAEA,GAAA,KAAA,EAAA,SAAA,EAAA,GAEA,EAAA,OAAA,aAEA,EACA,EAAA,OAAA,UAEA,EAAA,QAAA,GAIA,EAAA,EAAA,YAIA,UAAA,SAAA,GACA,GAAA,GAAA,KACA,EAAA,EAAA,kBAEA,GAAA,YAAA,EAAA,SAAA,GAGA,IAAA,GAFA,GAAA,EAAA,MAEA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAEA,GAAA,IACA,OAAA,EAAA,GAAA,OACA,SAAA,EAAA,GAAA,SACA,MAAA,EAAA,GAAA,MACA,aAAA,EAAA,GAAA,aACA,QAAA,EAAA,GAAA,QACA,QACA,MAAA,EAAA,GAAA,SAAA,OACA,OAAA,EAAA,GAAA,UAEA,SAAA,EACA,YAAA,GAGA,GAAA,QACA,OAAA,EAAA,GAAA,QACA,GACA,QAAA,GACA,kBAOA,YAAA,SAAA,GAEA,EAAA,UADA,EAAA,MAAA,GACA,EAAA,WAGA,EAEA,EAAA,KAAA,GAGA,YAAA,WACA,MAAA,IAGA,iBAAA,SAAA,EAAA,EAAA,GACA,GAAA,GAAA,QAAA,QACA,EAAA,QAAA,MAEA,EAAA,EAAA,kBAAA,EACA,GAAA,IAAA,EAAA,SAAA,GACA,EAAA,KAAA,GACA,EAAA,GAAA,SAAA,WACA,EAAA,MAAA,OAEA,GAAA,QAAA,WACA,EAAA,OAAA,UCrHA,QAAA,OAAA,YACA,UAAA,eAAA,WACA,OACA,SAAA,IACA,YAAA","file":"application.js","sourcesContent":["// Required Angular and Angular Material scripts\nvar angular = require('angular'),\n  ngan = require('angular-animate'),\n  ngar = require('angular-aria'),\n  ngme = require('angular-messages'),\n  md = require('angular-material');\n\nvar app = angular.module('FontoApp', ['ngMaterial'])\n  .config(function($mdThemingProvider) {\n    $mdThemingProvider.theme('default')\n      .primaryPalette('blue', {\n        'default': 'A200'\n      })\n      .accentPalette('pink');\n  });\n","angular.module('FontoApp')\n  .controller('ToolbarCtrl', function($mdSidenav, FontListSvc) {\n    var vm = this;\n\n    vm.toggleSidenav = function() {\n      $mdSidenav('sidenav').toggle();\n    };\n    vm.openMenu = function($mdOpenMenu, event) {\n      $mdOpenMenu(event);\n    };\n    vm.toggleSort = function(type) {\n      FontListSvc.setFontSort(type);\n    };\n    vm.currentSort = FontListSvc.getFontSort();\n  });\n","angular.module('FontoApp')\n  .directive('fontoToolbar', function() {\n    return {\n      restrict: 'E',\n      templateUrl: 'source/toolbar/toolbar.html'\n    }\n  });\n","angular.module('FontoApp')\n  .controller('FontoController', function(FontListSvc) {\n    var vm = this;\n\n    vm.fonts = {};\n    vm.loading = true;\n    vm.sort = FontListSvc.getFontSort();\n    console.log(vm.sort);\n\n    vm.order = {\n      by: {\n        family: 'family'\n      },\n      direction: {\n        family: true\n      }\n    };\n\n    FontListSvc.loadFonts({}, function (promise) {\n      promise.then(function(fonts) {\n        vm.loading = false;\n        vm.fonts = fonts;\n      }, function(reason) {\n        vm.loading = true;\n      }, function(update) {\n        vm.loading = true;\n      });\n    });\n\n\n    // FontListSvc.loadFontAPI('google', function(data) {\n    //   fonts.families = data;\n    // });\n    //\n    // FontListSvc.saveFontToDatabase('family', function(data) {\n    //\n    // });\n  });\n","angular.module('FontoApp')\n  .directive('fontoFonts', function() {\n    return {\n      restrict: 'E',\n      templateUrl: 'source/fonts/fonts.html'\n    }\n  });\n","angular.module('FontoApp')\n  .factory('FontListSvc', ['$log', '$http', '$timeout', '$q', function ($log, $http, $timeout, $q) {\n    var sort = {\n      type: 'family',\n      direction: true\n    };\n\n    return {\n      loadFontAPI: function (service, callback) {\n        if (service == 'google') {\n          var path = 'https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDGavjqjIkNU4CV9DHosp0xXV8pJyEQLXk';\n\n          $http.get(path)\n            .then\n\n          $http.get(path).success(function(data) {\n            callback(data);\n          });\n        } else {\n          return false;\n        }\n      },\n\n      loadFontDatabase: function () {\n        var Datastore = require('nedb'),\n          AppDirectory = require('appdirectory');\n\n        var app = new AppDirectory({\n          appName: 'Fonto',\n          appVersion: 'v010'\n        });\n\n        return new Datastore({\n          filename: app.userData() + '/database/Fonts.db',\n          autoload: true\n        });\n      },\n\n      loadFonts: function (families, callback) {\n        var self = this,\n          database = self.loadFontDatabase(),\n          deferred = $q.defer();\n\n        database.find(families, function (error, matches) {\n          // setTimeout(function() {\n            deferred.notify('Starting.');\n\n            if (error) {\n              deferred.reject('Error.');\n            } else {\n              deferred.resolve(matches);\n            }\n          // }, 1000);\n\n          callback(deferred.promise);\n        });\n      },\n\n      syncFonts: function (service) {\n        var self = this;\n        var db = self.loadFontDatabase();\n\n        self.loadFontAPI(service, function (data) {\n          var fonts = data.items;\n\n          for (var i = 0; i < fonts.length; i++) {\n            // Set the new database structure\n            var family = {\n              family: fonts[i].family,\n              category: fonts[i].category,\n              files: fonts[i].files,\n              lastModified: fonts[i].lastModified,\n              subsets: fonts[i].subsets,\n              styles: {\n                count: fonts[i].variants.length,\n                styles: fonts[i].variants\n              },\n              enabled: false,\n              defaultSize: 32\n            };\n\n            db.update({\n              family: fonts[i].family\n            }, family, {\n              upsert: true\n            }, function (error, replaced) {\n\n            });\n          }\n        });\n      },\n\n      setFontSort: function (type) {\n        if (sort.type == type) {\n          sort.direction = !sort.direction;\n        }\n        else {\n          sort.direction = true;\n        }\n        sort.type = type;\n      },\n\n      getFontSort: function () {\n        return sort;\n      },\n\n      downloadFontFile: function (url, destination, callback) {\n        var http = require('http'),\n          fs = require('fs');\n\n        var file = fs.createWriteStream(destination);\n        http.get(url, function(response) {\n          response.pipe(file);\n          file.on('finish', function() {\n            file.close(callback);\n          });\n        }).on('error', function(error) {\n          fs.unlink(destination);\n        });\n      }\n    }\n  }]);\n","angular.module('FontoApp')\n  .directive('fontoSidenav', function() {\n    return {\n      restrict: 'E',\n      templateUrl: 'source/sidenav/sidenav.html'\n    }\n  });\n"],"sourceRoot":"/source/"}