var angular=require("angular"),ngan=require("angular-animate"),ngar=require("angular-aria"),ngme=require("angular-messages"),md=require("angular-material"),app=angular.module("FontoApp",["ngMaterial"]).config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("blue",{"default":"A200"}).accentPalette("pink")}]);angular.module("FontoApp").controller("ToolbarCtrl",["$mdSidenav","FontListSvc",function(t,n){var o=this;o.toggleSidenav=function(){t("sidenav").toggle()},o.openMenu=function(t,n){t(n)},o.toggleSort=function(t){n.setFontSort(t)},o.currentSort=n.getFontSort()}]),angular.module("FontoApp").directive("fontoToolbar",function(){return{restrict:"E",templateUrl:"source/toolbar/toolbar.html"}}),angular.module("FontoApp").controller("FontoController",["FontListSvc",function(t){var n=this;n.fonts={},n.loading=!0,n.sort=t.getFontSort(),console.log(n.sort),n.order={by:{family:"family"},direction:{family:!0}},t.loadFonts({},function(t){t.then(function(t){n.loading=!1,n.fonts=t},function(){n.loading=!0},function(){n.loading=!0})})}]),angular.module("FontoApp").directive("fontoFonts",function(){return{restrict:"E",templateUrl:"source/fonts/fonts.html"}}),angular.module("FontoApp").factory("FontListSvc",["$log","$http","$timeout","$q",function(t,n,o,e){var r={type:"family",direction:!0};return{loadFontAPI:function(t,o){if("google"!=t)return!1;var e="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDGavjqjIkNU4CV9DHosp0xXV8pJyEQLXk";n.get(e).then,n.get(e).success(function(t){o(t)})},loadFontDatabase:function(){var t=require("nedb"),n=require("appdirectory"),o=new n({appName:"Fonto",appVersion:"v010"});return new t({filename:o.userData()+"/database/Fonts.db",autoload:!0})},loadFonts:function(t,n){var o=this,r=o.loadFontDatabase(),a=e.defer();r.find(t,function(t,o){a.notify("Starting."),t?a.reject("Error."):a.resolve(o),n(a.promise)})},syncFonts:function(t){var n=this,o=n.loadFontDatabase();n.loadFontAPI(t,function(t){for(var n=t.items,e=0;e<n.length;e++){var r={family:n[e].family,category:n[e].category,files:n[e].files,lastModified:n[e].lastModified,subsets:n[e].subsets,styles:{count:n[e].variants.length,styles:n[e].variants},enabled:!1,defaultSize:32};o.update({family:n[e].family},r,{upsert:!0},function(){})}})},setFontSort:function(t){r.direction=r.type==t?!r.direction:!0,r.type=t},getFontSort:function(){return r},downloadFontFile:function(t,n,o){var e=require("http"),r=require("fs"),a=r.createWriteStream(n);e.get(t,function(t){t.pipe(a),a.on("finish",function(){a.close(o)})}).on("error",function(){r.unlink(n)})}}}]),angular.module("FontoApp").directive("fontoSidenav",function(){return{restrict:"E",templateUrl:"source/sidenav/sidenav.html"}});
//# sourceMappingURL=application.js.map
